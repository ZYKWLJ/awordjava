# 一、整个JVM的 设计哲学——局部性原理+变化频率！

JVM的设计哲学思想：虚拟机栈、堆、方法区这三者之间的交互与空间存储的设计上，很值得深思。**三者作为程序运行时的重要区域，依次按照变化频率（生命周期）来划分区域**。

栈中的局部变量是**生命周期最短的**，同时也是变化最为迅速的，方法结束之后就没了，所以**还花不上垃圾回收器来回收它**，系统直接利用硬件实现（进出栈）来回收他。

堆中的对象较之又生命周期长一些，所以会保留一段时间，代不再使用在使用垃圾回收期回收之。但是依然是变化较大的，因为程序生成对象可能是时刻进行的。

JVM中内存区域变化最小的是**保存类元信息**的方法区，里面保存着**类信息，常量信息，即时编译产生的代码**（JDK8之前还保存着**静态变量，8之后就直接保存在堆中了**。原因还是可变性,**静态变量还是可变的**！）。

这里面的信息基本都是固定的，这里面变化很少，等到真正有类、常量不再使用之时，垃圾回收器依然会回收之。


# 二、总结：变化频率+局部性原理！
综上，看出一个变化最频繁的**对象引用——>堆中对象——>方法区中类信息**。所以JVM的内存区域划分很讲究分层思想，而这个类很大程度上就是**按照变化频率为依据实现的**。这也体现了系统设计时的分层结构思想。

体现程序的**局部性原理：空间局部性原理**，程序很有可能访问之前访问过的内存的周边内存区域。**而将访问频率相当的数据放在一个内存中**.

