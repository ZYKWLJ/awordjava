# 一、定义
## 1.RDB
RDB是一个**快照文件**，它是把redis内存存储的数据写到磁盘上，当redis实例宕机恢复数据的时候，方便从RDB的快照文件中恢复数据。

---
## 2.AOF
类似于mysql里面的redolog，只记录修改！
AOF的含义是**追加文件**，当redis操作**写命令**的时候，都会存储这个文件中，当redis实例宕机恢复数据的时候，会从这个文件中再次执行一遍命令来恢复数据。

---
# 二、差别
## 1.数据恢复速度
RDB 文件：
Redis Database” 文件 
存入的二进制命令，文件体积小，恢复速度较快。Redis 加载 RDB 文件时，**直接读取二进制数据并将其还原到内存中**，不需要对大量的命令进行解析和执行。

AOF 文件：

恢复速度相对较慢。需要依次读取 AOF 文件中的每一条写命令，并**执行这些命令**来重建数据库状态。


## 2.数据安全性
RDB 文件：数据安全性相对较低。RDB 是**基于快照**的持久化方式，默认会**按照一定的时间间隔生成快照**。如果在**两次快照生成之间**发生 Redis 服务器崩溃或其他异常情况，那么这段时间内对数据的修改将不会被保存到 RDB 文件中，可能会导致数据丢失。



AOF 文件：数据安全性相对较高。AOF 会**实时记录写操作命令**（根据配置的刷盘策略可能会有一定延迟），即使 Redis 服务器发生崩溃，最多也只会丢失最近一次刷盘到崩溃之间的少量数据。通过合理配置刷盘策略（如 always 每次写操作都同步到磁盘），可以进一步提高数据的安全性。


## 3.重写机制
RDB 文件：**没有重写机制**。它只是按照设定的条件**定期生成新的快照文件**，覆盖旧的 RDB 文件。

AOF 文件：**具有重写机制**。由于 AOF 文件会不断增大，为了减小文件体积，Redis 提供了 AOF 重写功能。重写过程会对 AOF 文件中的命令进行整理和优化，**去除冗余的命令**，只保留能够达到当前数据库状态的最少命令集合，从而减小 AOF 文件的大小。