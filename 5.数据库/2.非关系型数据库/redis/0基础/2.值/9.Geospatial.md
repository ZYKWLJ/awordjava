# 一、Redis Geospatial 定义

索引可让您`存储坐标并搜索它们`。此数据结构对于`查找给定半径或边界框内的附近点`很有用。

# 二、命令
```redis
GEOADD key longitude latitude member [longitude latitude member ...]
```
key：这是用于`存储地理位置信息的键名`，你可以把`它想象成一个容器`，用于`存放多个地点的地理信息`。在你的命令里，`键名是 location` ，表示存储地理位置数据的集合名称。

longitude：代表`地点的经度`，是一个浮点数。在命令中 -122.276 就是 station:1 这个地点的经度。

latitude：表示`地点的纬度`，同样是一个浮点数。37.0921 即为 station:1 的纬度。

member：是用来标识这个`地理位置的成员名称`，通常是一个有意义的字符串。station:1 就是这个地理位置的标识，可能代表某个特定的站点。


# 三、实战
## 1.逐个添加

```redis
127.0.0.1:6379> GEOADD location -122.345 37.1234 station:2
(integer) 1
127.0.0.1:6379> GEOADD location -122.111 37.0505 station:3
(integer) 1
127.0.0.1:6379> GEOADD location -122.567 37.2222 station:4
(integer) 1
127.0.0.1:6379> GEOADD location -122.009 37.0808 station:5
(integer) 1

```

## 2.逐个查询
```redis
127.0.0.1:6379> GEOPOS location station:2 station:3 station:4 station:5
1) 1) "-122.34500010970153809"
   2) "37.12340015792178782"
2) 1) "-122.11100008778381348"
   2) "37.05050021349076723"
3) 1) "-122.56700004577636719"
   2) "37.22220021548271912"
4) 1) "-122.00900001907348633"
   2) "37.08080024442249375"
```

## 3.按范围查询
现在要查找以`经度 -122.2、纬度 37.1 为中心`，`半径 10 千米范围内`的所有地点，并`返回它们的经纬度`和与`中心点的距离`：

```redis
127.0.0.1:6379> GEORADIUS location -122.2 37.1 10 km WITHCOORD WITHDIST
1) 1) "station:3"
   2) "9.6275"
   3) 1) "-122.11100131273269653"
      2) "37.05049951571714217"

```

# 四、用法
常常用来将同类别的商铺，比如咖啡馆等一个类别的所有商家的坐标全部存储在redis中，后面就可以通过自己的经纬度，找到具体类别的商铺，并且按照远近距离排序，方便顾客完成查找！