# JVM 如何利用缓存一致性协议？

##  1.volatile变量
  JVM 对 volatile **变量的读写操作会使用内存屏障**，确保对该变量的操作是**可见的和有序**的。内存屏障会触发处理器的**缓存一致性协议**，**确保所有处理器看到的 volatile 变量的值是一致的**。
   volatile变量的作用见下面的总结

## 2.synchronized块
  JVM 在**进入和退出同步块时插入内存屏障**，确保同步块内的所有操作在多处理器环境下的可见性和有序性。
  **进入同步块时，会刷新处理器缓存以确保读取的是最新的值；退出同步块时，会将修改后的值写回主内存**。

## 3.内存屏障指令
  JVM 使用底层处理器提供的内存屏障指令（如 **mfence、lfence、sfence**）来控制内存操作的顺序，确保缓存一致性。